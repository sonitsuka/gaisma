<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="https://f.vimeocdn.com/js/froogaloop2.min.js"></script>

</head>
<body>
    <div class="video-category">

        <div class="video">
            <a href="https://vimeo.com/639004437" target="_blank">
                <img src="/images/ISRA-perfomance.png" alt="ISRA Thumbnail" class="video--thumbnail">
                <iframe id="vimeo-216516573" src="https://player.vimeo.com/video/216516573">
                <h4 class="p--title">ISRA - Journey Through The Night - Art House Short Film</h4>
            </a>
            <p class="credit">Direction/Production Manager - Reiner Bocka<br>Costume Designer - Stjepan Cuka<br>Choreography, Performance - Alisa Scetinina<br>Music - Maximilian Luz and Ellie Fords<br>Camera - Peter Heizmann, Braian Zajak<br>Post Production, Color Grading - Roman Brauch</p>
        </div>

        <div class="video">
            <a href="https://vimeo.com/216516573" target="_blank">
                <img src="/images/alisa-perfomance.png" alt="Alisa Thumbnail" class="video--thumbnail">
                <h4 class="p--title">Alisa - filmed by Simon Pfister in Bavarian State Opera</h4>
                <iframe id="vimeo-216516573" class="vimeo-container"
                src="https://player.vimeo.com/video/216516573"
                frameborder="0" allow="autoplay"></iframe>
            </a>
            <p class="credit">Director - Donna Mae Burrows<br>Camera - Simon Pfister<br>Dancer - Alisa Scetinina</p>
        </div>
    </div>

    
    <script>
        const thumbnails = document.querySelectorAll('.video--thumbnail');
          // Get parent link
        const parent = thumbnail.closest('a');
        
        // Get unique iframe ID 
        //const iframeId = 'vimeo-' + parent.href.split('/').pop();
        const iframeId = 'vimeo-' + thumbnail.dataset.videoId;
        
        thumbnails.forEach(thumbnail => {

            thumbnail.addEventListener('mouseover', () => {

            // Get iframe element
            const iframe = document.getElementById(iframeId);

            // Init Froogaloop 
            const player = $f(iframe);

            player.addEvent('ready', () => {
            iframe.src = generateIframeSrc(iframeId);
            player.api('loadVideo');
            });

            });
            thumbnail.addEventListener('mouseleave', () => {

            let iframe = thumbnail.parentElement.nextElementSibling.querySelector('iframe');
            
            // Get Froogaloop player instance
            let player = $f(iframe);
            
            // Pause the video
            player.api('pause');

            });

        });
    </script>
</body>
</html>